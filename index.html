<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadoras de papel</title>
<link rel="manifest" href="manifest.json">
<link rel="icon" sizes="192x192" href="icon-192.png">
<link rel="apple-touch-icon" href="icon-512.png">
<meta name="theme-color" content="#0d6efd">
<style>
  :root{
    --azul:#0d6efd;
    --azul-claro:#dbe8ff;
    --naranja:#ff8a00;
  }
  body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f8f9fa}
  header{background:var(--azul);color:#fff;text-align:center;padding:10px;display:flex;align-items:center;justify-content:center;gap:10px}
  header img{height:36px}
  .container{max-width:480px;margin:20px auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.1)}
  .tabs{display:flex;margin-bottom:20px}
  .tab{flex:1;padding:10px;border:none;cursor:pointer;background:#e9ecef;font-weight:bold;border-radius:10px 10px 0 0}
  .tab.active{background:var(--naranja);color:#fff}
  input{width:100%;padding:10px;margin:6px 0 14px;border-radius:6px;border:1px solid #ccc;font-size:16px}
  .btn{color:#fff;border:none;padding:12px;width:100%;font-size:16px;font-weight:bold;border-radius:8px;cursor:pointer}
  .btn-naranja{background:var(--naranja)}
  .btn-azul{background:var(--azul)}
  .result{margin-top:20px;background:#fff3cd;padding:15px;border-radius:10px;font-size:16px}
  footer{background:var(--azul);color:#fff;text-align:center;padding:10px;position:fixed;bottom:0;width:100%;font-size:14px}

  /* Subpesta√±as dentro de Papel resmado (azules) */
  .subtabs{display:flex;gap:6px;margin:2px 0 14px}
  .subtab{
    flex:1;padding:8px 6px;border-radius:8px;border:1px solid var(--azul);
    background:var(--azul-claro);color:#063fbd;font-weight:600;cursor:pointer;font-size:14px
  }
  .subtab.active{background:var(--azul);color:#fff}
  .hidden{display:none}
</style>
</head>
<body>
<header>
  <img src="icon-192.png" alt="Logo">
  <h2>Calculadoras de papel</h2>
</header>

<div class="container">
  <!-- Pesta√±as principales -->
  <div class="tabs">
    <button class="tab active" id="tab-bobina">Bobina de papel</button>
    <button class="tab" id="tab-resma">Papel resmado</button>
  </div>

  <!-- Pesta√±a: Bobina -->
  <div id="bobina" class="tab-content">
    <label>Gramaje (g/m¬≤):</label>
    <input type="number" id="gramaje" inputmode="decimal">

    <label>Espesor (¬µm):</label>
    <input type="number" id="espesor" inputmode="decimal">

    <label>Ancho de la bobina (mm):</label>
    <input type="number" id="ancho" inputmode="decimal">

    <label>Di√°metro exterior (mm):</label>
    <input type="number" id="diametroExterior" inputmode="decimal">

    <label>Di√°metro del mandril (mm):</label>
    <input type="number" id="diametroMandril" inputmode="decimal">

    <button class="btn btn-naranja" onclick="calcularBobina()">Calcular Peso</button>

    <div class="result" id="resultadoBobina"></div>
  </div>

  <!-- Pesta√±a: Papel resmado -->
  <div id="resma" class="tab-content hidden">
    <!-- Subpesta√±as azules -->
    <div class="subtabs" role="tablist" aria-label="Opciones papel resmado">
      <button id="sub-peso"   class="subtab active" role="tab" aria-selected="true">Peso resma</button>
      <button id="sub-pliegos" class="subtab" role="tab" aria-selected="false">Pliegos desde metros</button>
      <button id="sub-metros" class="subtab" role="tab" aria-selected="false">Metros desde pliegos</button>
    </div>

    <!-- Contenido: Peso resma -->
    <div id="panel-peso">
      <label>Gramaje (g/m¬≤):</label>
      <input type="number" id="gramajeResma" inputmode="decimal">

      <label>Ancho (mm):</label>
      <input type="number" id="anchoResma" inputmode="decimal">

      <label>Largo (mm):</label>
      <input type="number" id="largoResma" inputmode="decimal">

      <label>N√∫mero de pliegos:</label>
      <input type="number" id="pliegos" inputmode="decimal">

      <button class="btn btn-azul" onclick="calcularResma()">Calcular Peso</button>
      <div class="result" id="resultadoResma"></div>
    </div>

    <!-- Contenido: Pliegos desde metros -->
    <div id="panel-pliegos" class="hidden">
      <label>Metros lineales disponibles (m):</label>
      <input type="number" id="metrosDisponibles" inputmode="decimal">

      <label>Largo del pliego (mm):</label>
      <input type="number" id="largoPliegoPliegos" inputmode="decimal">

      <button class="btn btn-azul" onclick="calcularPliegosDesdeMetros()">Calcular pliegos</button>
      <div class="result" id="resultadoPliegos"></div>
    </div>

    <!-- Contenido: Metros desde pliegos -->
    <div id="panel-metros" class="hidden">
      <label>N√∫mero de pliegos:</label>
      <input type="number" id="pliegosParaMetros" inputmode="decimal">

      <label>Largo del pliego (mm):</label>
      <input type="number" id="largoPliegoMetros" inputmode="decimal">

      <button class="btn btn-azul" onclick="calcularMetrosDesdePliegos()">Calcular metros</button>
      <div class="result" id="resultadoMetros"></div>
    </div>
  </div>
</div>

<footer>¬© Mihai Florea ‚Äî Perell√≥n S.L.</footer>

<script>
  // Cambio entre pesta√±as principales
  const tabBobina = document.getElementById('tab-bobina');
  const tabResma  = document.getElementById('tab-resma');
  const viewBobina= document.getElementById('bobina');
  const viewResma = document.getElementById('resma');

  tabBobina.addEventListener('click', () => {
    tabBobina.classList.add('active'); tabResma.classList.remove('active');
    viewBobina.classList.remove('hidden'); viewResma.classList.add('hidden');
  });
  tabResma.addEventListener('click', () => {
    tabResma.classList.add('active'); tabBobina.classList.remove('active');
    viewResma.classList.remove('hidden'); viewBobina.classList.add('hidden');
  });

  // Subpesta√±as internas (azules)
  const subPeso    = document.getElementById('sub-peso');
  const subPliegos = document.getElementById('sub-pliegos');
  const subMetros  = document.getElementById('sub-metros');
  const panelPeso    = document.getElementById('panel-peso');
  const panelPliegos = document.getElementById('panel-pliegos');
  const panelMetros  = document.getElementById('panel-metros');

  function activarSub(tab){
    [subPeso, subPliegos, subMetros].forEach(b=>b.classList.remove('active'));
    [panelPeso, panelPliegos, panelMetros].forEach(p=>p.classList.add('hidden'));
    tab.classList.add('active');
    if(tab===subPeso) panelPeso.classList.remove('hidden');
    if(tab===subPliegos) panelPliegos.classList.remove('hidden');
    if(tab===subMetros) panelMetros.classList.remove('hidden');
  }
  subPeso.addEventListener('click', ()=>activarSub(subPeso));
  subPliegos.addEventListener('click', ()=>activarSub(subPliegos));
  subMetros.addEventListener('click', ()=>activarSub(subMetros));

  // C√°lculos Bobina
  function calcularBobina() {
    const gramaje = parseFloat(document.getElementById('gramaje').value);
    const espesorMicras = parseFloat(document.getElementById('espesor').value);
    const anchoMm = parseFloat(document.getElementById('ancho').value);
    const diamExteriorMm = parseFloat(document.getElementById('diametroExterior').value);
    const diamMandrilMm = parseFloat(document.getElementById('diametroMandril').value);

    if ([gramaje,espesorMicras,anchoMm,diamExteriorMm,diamMandrilMm].some(isNaN)) {
      document.getElementById('resultadoBobina').innerHTML = "‚ö†Ô∏è Por favor, completa todos los campos.";
      return;
    }

    // Conversi√≥n a metros
    const D = diamExteriorMm / 1000;
    const d = diamMandrilMm / 1000;
    const t = espesorMicras / 1e6;
    const ancho = anchoMm / 1000;

    // Metros lineales (m)
    const L = Math.PI * (D*D - d*d) / (4 * t);

    // Peso (kg)
    const peso = (gramaje / 1000) * ancho * L;

    // Mano
    const mano = espesorMicras / gramaje;

    document.getElementById('resultadoBobina').innerHTML = `
      üìà <b>Peso:</b> ${peso.toFixed(2)} kg<br>
      ‚úã <b>Mano:</b> ${mano.toFixed(2)}<br>
      üìè <b>Metros lineales:</b> ${Math.round(L).toLocaleString('es-ES')} m
    `;
  }

  // C√°lculo Peso resma
  function calcularResma() {
    const gramaje = parseFloat(document.getElementById('gramajeResma').value);
    const ancho = parseFloat(document.getElementById('anchoResma').value);
    const largo = parseFloat(document.getElementById('largoResma').value);
    const pliegos = parseFloat(document.getElementById('pliegos').value);

    if ([gramaje,ancho,largo,pliegos].some(isNaN)) {
      document.getElementById('resultadoResma').innerHTML = "‚ö†Ô∏è Por favor, completa todos los campos.";
      return;
    }

    const peso = (gramaje * (ancho/1000) * (largo/1000) * pliegos) / 1000;
    document.getElementById('resultadoResma').innerHTML = `üì¶ <b>Peso:</b> ${peso.toFixed(2)} kg`;
  }

  // C√°lculo Pliegos desde metros
  function calcularPliegosDesdeMetros(){
    const metros = parseFloat(document.getElementById('metrosDisponibles').value);
    const largoMm = parseFloat(document.getElementById('largoPliegoPliegos').value);
    if ([metros,largoMm].some(isNaN) || largoMm<=0){
      document.getElementById('resultadoPliegos').innerHTML = "‚ö†Ô∏è Completa metros y largo del pliego.";
      return;
    }
    const pliegos = Math.floor((metros*1000)/largoMm);
    document.getElementById('resultadoPliegos').innerHTML = `üßÆ <b>Pliegos posibles:</b> ${pliegos.toLocaleString('es-ES')}`;
  }

  // C√°lculo Metros desde pliegos
  function calcularMetrosDesdePliegos(){
    const pliegos = parseFloat(document.getElementById('pliegosParaMetros').value);
    const largoMm = parseFloat(document.getElementById('largoPliegoMetros').value);
    if ([pliegos,largoMm].some(isNaN)){
      document.getElementById('resultadoMetros').innerHTML = "‚ö†Ô∏è Completa pliegos y largo del pliego.";
      return;
    }
    const metros = (pliegos * largoMm) / 1000;
    document.getElementById('resultadoMetros').innerHTML = `üìè <b>Metros necesarios:</b> ${metros.toLocaleString('es-ES', {maximumFractionDigits:2})} m`;
  }

  // Exponer funciones (por eventos inline)
  window.calcularBobina = calcularBobina;
  window.calcularResma = calcularResma;
  window.calcularPliegosDesdeMetros = calcularPliegosDesdeMetros;
  window.calcularMetrosDesdePliegos = calcularMetrosDesdePliegos;
</script>
</body>
</html>