<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Calculadora de peso de bobinas - Variante 1</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2b2b2b">
  <link rel="icon" href="icon-192.png">
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;margin:16px}
    label{display:block;margin-top:12px}
    select,input,button{padding:8px;margin-top:6px;width:100%;max-width:420px}
  </style>
</head>
<body>
  <h1>Calculadora de peso de bobinas — Variante 1</h1>

  <label for="paperType">Tipo de papel</label>
  <select id="paperType">
    <option value="offset_80" data-thickness="0.11" data-density="1350">Papel offset — 80 g/m² (0.11 mm)</option>
    <option value="offset_100" data-thickness="0.12" data-density="1350">Papel offset — 100 g/m² (0.12 mm)</option>
    <option value="offset_120" data-thickness="0.15" data-density="1350">Papel offset — 120 g/m² (0.15 mm)</option>

    <option value="couche_115" data-thickness="0.11" data-density="1450">Papel couché — 115 g/m² (0.11 mm)</option>
    <option value="couche_130" data-thickness="0.13" data-density="1450">Papel couché — 130 g/m² (0.13 mm)</option>
    <option value="couche_150" data-thickness="0.16" data-density="1450">Papel couché — 150 g/m² (0.16 mm)</option>
    <option value="couche_170" data-thickness="0.19" data-density="1450">Papel couché — 170 g/m² (0.19 mm)</option>

    <option value="kraft_70" data-thickness="0.08" data-density="1250">Papel kraft — 70 g/m² (0.08 mm)</option>
    <option value="kraft_80" data-thickness="0.10" data-density="1250">Papel kraft — 80 g/m² (0.10 mm)</option>
    <option value="kraft_90" data-thickness="0.11" data-density="1250">Papel kraft — 90 g/m² (0.11 mm)</option>

    <option value="thermal_48" data-thickness="0.06" data-density="1150">Papel térmico — 48 g/m² (0.06 mm)</option>
    <option value="thermal_55" data-thickness="0.07" data-density="1150">Papel térmico — 55 g/m² (0.07 mm)</option>

    <option value="recycled_80" data-thickness="0.11" data-density="1300">Papel reciclado — 80 g/m² (0.11 mm)</option>
    <option value="recycled_120" data-thickness="0.15" data-density="1300">Papel reciclado — 120 g/m² (0.15 mm)</option>

    <option value="cardstock_200" data-thickness="0.24" data-density="1450">Cartulina / cartón fino — 200 g/m² (0.24 mm)</option>
    <option value="cardstock_300" data-thickness="0.45" data-density="1450">Cartón grueso — 300 g/m² (0.45 mm)</option>

    <option value="custom">Ingresar espesor manual...</option>
  </select>

  <div id="manualThickness" style="display:none;max-width:420px">
    <label for="thicknessInput">Espesor (mm)</label>
    <input id="thicknessInput" type="number" step="0.001" min="0" placeholder="Ej: 0.11">
    <label for="densityInput">Densidad (kg/m³)</label>
    <input id="densityInput" type="number" step="10" min="0" placeholder="Ej: 1350">
  </div>

  <label for="width">Ancho (mm)</label>
  <input id="width" type="number" step="0.1" placeholder="Ej: 1000">

  <label for="outerDiameter">Diámetro exterior (mm)</label>
  <input id="outerDiameter" type="number" step="0.1" placeholder="Ej: 600">

  <label for="coreDiameter">Diámetro del mandril (mm)</label>
  <input id="coreDiameter" type="number" step="0.1" placeholder="Ej: 76">

  <button id="calc">Calcular peso</button>

  <h2 id="result">Resultado: —</h2>

  <script>
    const paperSelect = document.getElementById('paperType');
    const manualDiv = document.getElementById('manualThickness');
    const thicknessInput = document.getElementById('thicknessInput');
    const densityInput = document.getElementById('densityInput');

    paperSelect.addEventListener('change', ()=>{
      manualDiv.style.display = paperSelect.value === 'custom' ? 'block' : 'none';
    });

    document.getElementById('calc').addEventListener('click', ()=>{
      const width = parseFloat(document.getElementById('width').value) || 0;
      const D = parseFloat(document.getElementById('outerDiameter').value) || 0;
      const d = parseFloat(document.getElementById('coreDiameter').value) || 0;

      let thicknessMm = 0;
      let density = 0;
      if(paperSelect.value === 'custom'){
        thicknessMm = parseFloat(thicknessInput.value) || 0;
        density = parseFloat(densityInput.value) || 1350;
      } else {
        const opt = paperSelect.selectedOptions[0];
        thicknessMm = parseFloat(opt.getAttribute('data-thickness')) || 0;
        density = parseFloat(opt.getAttribute('data-density')) || 1350;
      }

      const t = thicknessMm/1000;
      const w = width/1000;
      const outerArea = Math.PI*(Math.pow(D/2000,2));
      const innerArea = Math.PI*(Math.pow(d/2000,2));
      const areaCross = outerArea - innerArea;
      const volume = areaCross * w;
      const mass = volume * density;

      document.getElementById('result').innerText = 'Resultado aproximado: ' + mass.toFixed(2) + ' kg (estimación)';
    });

    if(paperSelect.value !== 'custom') manualDiv.style.display = 'none';
  </script>

  <script>
    if('serviceWorker' in navigator){
      navigator.serviceWorker.register('sw.js').catch(()=>{});
    }
  </script>
</body>
</html>