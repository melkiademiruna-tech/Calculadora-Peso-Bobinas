<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadoras de papel</title>
<link rel="manifest" href="manifest.json">
<link rel="icon" sizes="192x192" href="icon-192.png">
<link rel="apple-touch-icon" href="icon-512.png">
<meta name="theme-color" content="#0d6efd">
<style>
  :root{
    --azul:#0d6efd;
    --azul-claro:#dbe8ff;
    --naranja:#ff8a00;
  }
  body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f8f9fa}
  header{background:var(--azul);color:#fff;text-align:center;padding:10px;display:flex;align-items:center;justify-content:center;gap:10px}
  header img{height:36px}
  .container{max-width:480px;margin:20px auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.1)}
  .tabs{display:flex;margin-bottom:20px}
  .tab{flex:1;padding:10px;border:none;cursor:pointer;background:#e9ecef;font-weight:bold;border-radius:10px 10px 0 0}
  .tab.active{background:var(--naranja);color:#fff}
  input{width:100%;padding:10px;margin:6px 0 14px;border-radius:6px;border:1px solid #ccc;font-size:16px}
  .btn{color:#fff;border:none;padding:12px;width:100%;font-size:16px;font-weight:bold;border-radius:8px;cursor:pointer}
  .btn-naranja{background:var(--naranja)}
  .btn-azul{background:var(--azul)}
  .result{margin-top:20px;background:#fff3cd;padding:15px;border-radius:10px;font-size:16px}
  footer{background:var(--azul);color:#fff;text-align:center;padding:10px;position:fixed;bottom:0;width:100%;font-size:14px}

  /* Subpesta√±as dentro de Papel resmado (azules) */
  .subtabs{display:flex;gap:6px;margin:2px 0 14px}
  .subtab{
    flex:1;padding:8px 6px;border-radius:8px;border:1px solid var(--azul);
    background:var(--azul-claro);color:#063fbd;font-weight:600;cursor:pointer;font-size:14px
  }
  .subtab.active{background:var(--azul);color:#fff}
  .hidden{display:none}
</style>
</head>
<body>
<header>
  <img src="icon-192.png" alt="Logo">
  <h2>Calculadoras de papel</h2>
</header>

<div class="container">
  <!-- Pesta√±as principales -->
  <div class="tabs">
    <button class="tab active" id="tab-bobina">Bobina de papel</button>
    <button class="tab" id="tab-resma">Papel resmado</button>
  </div>

  <!-- Pesta√±a: Bobina -->
  <div id="bobina" class="tab-content">
    <label>Gramaje (g/m¬≤):</label>
    <input type="number" id="gramaje" inputmode="decimal">

    <label>Espesor (¬µm):</label>
    <input type="number" id="espesor" inputmode="decimal">

    <label>Ancho de la bobina (mm):</label>
    <input type="number" id="ancho" inputmode="decimal">

    <label>Di√°metro exterior (mm):</label>
    <input type="number" id="diametroExterior" inputmode="decimal">

    <label>Di√°metro del mandril (mm):</label>
    <input type="number" id="diametroMandril" inputmode="decimal">

    <button class="btn btn-naranja" onclick="calcularBobina()">Calcular Peso</button>

    <div class="result" id="resultadoBobina"></div>
  </div>

  <!-- Pesta√±a: Papel resmado -->
  <div id="resma" class="tab-content hidden">
    <!-- Subpesta√±as azules -->
    <div class="subtabs">
      <button id="sub-peso" class="subtab active">Peso de la resma</button>
      <button id="sub-pliegos-peso" class="subtab">N√∫mero de pliegos por peso</button>
      <button id="sub-pliegos-bobina" class="subtab">N√∫mero de pliegos desde bobina</button>
    </div>

    <!-- Peso de la resma -->
    <div id="panel-peso">
      <label>Gramaje (g/m¬≤):</label>
      <input type="number" id="gramajeResma" inputmode="decimal">
      <label>Ancho (mm):</label>
      <input type="number" id="anchoResma" inputmode="decimal">
      <label>Largo (mm):</label>
      <input type="number" id="largoResma" inputmode="decimal">
      <label>N√∫mero de pliegos:</label>
      <input type="number" id="pliegosResma" inputmode="decimal">
      <button class="btn btn-azul" onclick="calcularPesoResma()">Calcular Peso</button>
      <div class="result" id="resultadoResma"></div>
    </div>

    <!-- N√∫mero de pliegos por peso -->
    <div id="panel-pliegos-peso" class="hidden">
      <label>Peso total de la pila (kg):</label>
      <input type="number" id="pesoPila" inputmode="decimal">
      <label>Gramaje (g/m¬≤):</label>
      <input type="number" id="gramajePila" inputmode="decimal">
      <label>Ancho (mm):</label>
      <input type="number" id="anchoPila" inputmode="decimal">
      <label>Largo (mm):</label>
      <input type="number" id="largoPila" inputmode="decimal">
      <button class="btn btn-azul" onclick="calcularPliegosPorPeso()">Calcular Pliegos</button>
      <div class="result" id="resultadoPliegosPeso"></div>
    </div>

    <!-- N√∫mero de pliegos desde bobina -->
    <div id="panel-pliegos-bobina" class="hidden">
      <label>Metros lineales de la bobina (m):</label>
      <input type="number" id="metrosBobina" inputmode="decimal">
      <label>Largo del pliego (mm):</label>
      <input type="number" id="largoPliegoBobina" inputmode="decimal">
      <button class="btn btn-azul" onclick="calcularPliegosDesdeBobina()">Calcular Pliegos</button>
      <div class="result" id="resultadoPliegosBobina"></div>
    </div>
  </div>
</div>

<footer>¬© Mihai Florea ‚Äî Perell√≥n S.L.</footer>

<script>
  // Cambio entre pesta√±as principales
  const tabBobina = document.getElementById('tab-bobina');
  const tabResma  = document.getElementById('tab-resma');
  const viewBobina= document.getElementById('bobina');
  const viewResma = document.getElementById('resma');

  tabBobina.addEventListener('click', () => {
    tabBobina.classList.add('active'); tabResma.classList.remove('active');
    viewBobina.classList.remove('hidden'); viewResma.classList.add('hidden');
  });
  tabResma.addEventListener('click', () => {
    tabResma.classList.add('active'); tabBobina.classList.remove('active');
    viewResma.classList.remove('hidden'); viewBobina.classList.add('hidden');
  });

  // Subpesta√±as internas
  const subPeso = document.getElementById('sub-peso');
  const subPliegosPeso = document.getElementById('sub-pliegos-peso');
  const subPliegosBobina = document.getElementById('sub-pliegos-bobina');
  const panelPeso = document.getElementById('panel-peso');
  const panelPliegosPeso = document.getElementById('panel-pliegos-peso');
  const panelPliegosBobina = document.getElementById('panel-pliegos-bobina');

  function activarSub(tab){
    [subPeso, subPliegosPeso, subPliegosBobina].forEach(b=>b.classList.remove('active'));
    [panelPeso, panelPliegosPeso, panelPliegosBobina].forEach(p=>p.classList.add('hidden'));
    tab.classList.add('active');
    if(tab===subPeso) panelPeso.classList.remove('hidden');
    if(tab===subPliegosPeso) panelPliegosPeso.classList.remove('hidden');
    if(tab===subPliegosBobina) panelPliegosBobina.classList.remove('hidden');
  }
  subPeso.addEventListener('click', ()=>activarSub(subPeso));
  subPliegosPeso.addEventListener('click', ()=>activarSub(subPliegosPeso));
  subPliegosBobina.addEventListener('click', ()=>activarSub(subPliegosBobina));

  // Funciones de c√°lculo
  function calcularBobina() {
    const gramaje = parseFloat(document.getElementById('gramaje').value);
    const espesorMicras = parseFloat(document.getElementById('espesor').value);
    const anchoMm = parseFloat(document.getElementById('ancho').value);
    const diamExteriorMm = parseFloat(document.getElementById('diametroExterior').value);
    const diamMandrilMm = parseFloat(document.getElementById('diametroMandril').value);

    if ([gramaje,espesorMicras,anchoMm,diamExteriorMm,diamMandrilMm].some(isNaN)) {
      document.getElementById('resultadoBobina').innerHTML = "‚ö†Ô∏è Por favor, completa todos los campos.";
      return;
    }

    const D = diamExteriorMm / 1000;
    const d = diamMandrilMm / 1000;
    const t = espesorMicras / 1e6;
    const ancho = anchoMm / 1000;

    const L = Math.PI * (D*D - d*d) / (4 * t);
    const peso = (gramaje / 1000) * ancho * L;
    const mano = espesorMicras / gramaje;

    document.getElementById('resultadoBobina').innerHTML = `
      üìà <b>Peso:</b> ${peso.toFixed(2)} kg<br>
      ‚úã <b>Mano:</b> ${mano.toFixed(2)}<br>
      üìè <b>Metros lineales:</b> ${Math.round(L).toLocaleString('es-ES')} m
    `;
  }

  function calcularPesoResma() {
    const g = parseFloat(document.getElementById('gramajeResma').value);
    const a = parseFloat(document.getElementById('anchoResma').value);
    const l = parseFloat(document.getElementById('largoResma').value);
    const n = parseFloat(document.getElementById('pliegosResma').value);
    if ([g,a,l,n].some(isNaN)) return document.getElementById('resultadoResma').innerHTML="‚ö†Ô∏è Completa todos los campos.";
    const peso = (g * a * l * n) / 1e9;
    document.getElementById('resultadoResma').innerHTML = `üì¶ <b>Peso:</b> ${peso.toFixed(2)} kg`;
  }

  function calcularPliegosPorPeso() {
    const p = parseFloat(document.getElementById('pesoPila').value);
    const g = parseFloat(document.getElementById('gramajePila').value);
    const a = parseFloat(document.getElementById('anchoPila').value);
    const l = parseFloat(document.getElementById('largoPila').value);
    if ([p,g,a,l].some(isNaN)) return document.getElementById('resultadoPliegosPeso').innerHTML="‚ö†Ô∏è Completa todos los campos.";
    const pliegos = (p * 1e9) / (g * a * l);
    document.getElementById('resultadoPliegosPeso').innerHTML = `üìÑ <b>Pliegos:</b> ${Math.round(pliegos).toLocaleString('es-ES')}`;
  }

  function calcularPliegosDesdeBobina() {
    const m = parseFloat(document.getElementById('metrosBobina').value);
    const l = parseFloat(document.getElementById('largoPliegoBobina').value);
    if ([m,l].some(isNaN)) return document.getElementById('resultadoPliegosBobina').innerHTML="‚ö†Ô∏è Completa todos los campos.";
    const pliegos = (m * 1000) / l;
    document.getElementById('resultadoPliegosBobina').innerHTML = `üìÑ <b>Pliegos:</b> ${Math.round(pliegos).toLocaleString('es-ES')}`;
  }
</script>
</body>
</html>