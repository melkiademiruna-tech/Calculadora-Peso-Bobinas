<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora de Peso de Bobinas — v3.1</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icon-192.png" type="image/png" />
  <meta name="theme-color" content="#ff7f00" />
  <style>
    :root{
      --azul:#005b96;
      --naranja:#ff7f00;
      --naranja-hover:#e66b00;
      --gris-fondo:#f4f4f4;
      --borde:#e5e5e5;
    }
    *{box-sizing:border-box}
    body{
      font-family: Arial, sans-serif;
      background-color: var(--gris-fondo);
      margin:0; padding:0; min-height:100vh; display:flex; flex-direction:column;
    }
    header{
      display:flex; align-items:center; justify-content:center;
      background-color: var(--azul); color:#fff; padding:10px 12px; gap:10px;
    }
    header img{height:40px}
    header h1{margin:0; font-size:1.2rem}main{flex:1; padding:16px; max-width:480px; margin:16px auto 96px; background:#fff; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,.08)}

/* Tabs */
.tabs{display:flex; gap:8px; margin-bottom:16px}
.tab-btn{flex:1; padding:10px; border:1px solid var(--borde); background:#fff; color:var(--azul); font-weight:bold; border-radius:8px; cursor:pointer}
.tab-btn.active{background:var(--naranja); color:#fff; border-color:var(--naranja)}

label{display:block; margin-top:14px; font-weight:bold}
input{width:100%; padding:8px; font-size:16px; margin-top:5px; border:1px solid #ccc; border-radius:6px; text-align:right}

.actions{margin-top:18px}
button.primary{width:100%; padding:12px; background:var(--naranja); color:#fff; font-size:18px; border:none; border-radius:8px; cursor:pointer}
button.primary:hover{background:var(--naranja-hover)}

#resultado-bobina, #resultado-resma{margin-top:16px; font-size:20px; font-weight:bold; text-align:center; color:#333}

.hidden{display:none}

/* Sub-switch buttons in Resma */
.subswitch{display:flex; gap:8px; margin:8px 0 4px}
.subswitch .mode{flex:1; padding:8px; border:1px solid var(--borde); border-radius:8px; background:#fff; color:var(--azul); font-weight:bold; cursor:pointer}
.subswitch .mode.active{background:var(--naranja); color:#fff; border-color:var(--naranja)}

footer{
  background-color: var(--azul); color:#fff; text-align:center; padding:10px; font-size:14px;
  position:fixed; bottom:0; left:0; right:0;
}

  </style>
</head>
<body>
  <header>
    <img src="icon-192.png" alt="Logo" />
    <h1>Calculadoras de papel</h1>
  </header>  <main>
    <!-- Tabs selector -->
    <div class="tabs" role="tablist">
      <button id="tab-bobina" class="tab-btn active" role="tab" aria-controls="panel-bobina" aria-selected="true">Bobina de papel</button>
      <button id="tab-resma" class="tab-btn" role="tab" aria-controls="panel-resma" aria-selected="false">Papel resmado</button>
    </div><!-- Panel: Bobina -->
<section id="panel-bobina" role="tabpanel" aria-labelledby="tab-bobina">
  <label for="g">Gramaje (g/m²):</label>
  <input type="number" id="g" step="any" inputmode="decimal" />

  <label for="t">Espesor (µm):</label>
  <input type="number" id="t" step="any" inputmode="decimal" />

  <label for="a">Ancho de la bobina (mm):</label>
  <input type="number" id="a" step="any" inputmode="decimal" />

  <label for="D">Diámetro exterior (mm):</label>
  <input type="number" id="D" step="any" inputmode="decimal" />

  <label for="d">Diámetro del mandril (mm):</label>
  <input type="number" id="d" step="any" inputmode="decimal" />

  <div class="actions">
    <button class="primary" id="btn-bobina">Calcular Peso</button>
  </div>
  <div id="resultado-bobina"></div>
</section>

<!-- Panel: Resma -->
<section id="panel-resma" class="hidden" role="tabpanel" aria-labelledby="tab-resma">
  <div class="subswitch" aria-label="Conmutador modo resma">
    <button id="mode-peso" class="mode active" aria-pressed="true">Calcular peso</button>
    <button id="mode-hojas" class="mode" aria-pressed="false">Calcular nº de hojas</button>
  </div>

  <!-- Bloque: Calcular peso de la resma -->
  <div id="bloque-peso">
    <label for="nH">Número de hojas:</label>
    <input type="number" id="nH" step="1" inputmode="numeric" />

    <label for="gR">Gramaje (g/m²):</label>
    <input type="number" id="gR" step="any" inputmode="decimal" />

    <label for="aR">Ancho del pliego (mm):</label>
    <input type="number" id="aR" step="any" inputmode="decimal" />

    <label for="lR">Largo del pliego (mm):</label>
    <input type="number" id="lR" step="any" inputmode="decimal" />

    <div class="actions">
      <button class="primary" id="btn-resma-peso">Calcular Peso</button>
    </div>
  </div>

  <!-- Bloque: Calcular número de hojas -->
  <div id="bloque-hojas" class="hidden">
    <label for="pK">Peso total de la pila (kg):</label>
    <input type="number" id="pK" step="any" inputmode="decimal" />

    <label for="gR2">Gramaje (g/m²):</label>
    <input type="number" id="gR2" step="any" inputmode="decimal" />

    <label for="aR2">Ancho del pliego (mm):</label>
    <input type="number" id="aR2" step="any" inputmode="decimal" />

    <label for="lR2">Largo del pliego (mm):</label>
    <input type="number" id="lR2" step="any" inputmode="decimal" />

    <div class="actions">
      <button class="primary" id="btn-resma-hojas">Calcular nº de hojas</button>
    </div>
  </div>

  <div id="resultado-resma"></div>
</section>

  </main>  <footer>
    © Mihai Florea — Perellón S.L.
  </footer>  <script>
    // --- Tabs ---
    const tabBobina = document.getElementById('tab-bobina');
    const tabResma  = document.getElementById('tab-resma');
    const panelBobina = document.getElementById('panel-bobina');
    const panelResma  = document.getElementById('panel-resma');

    tabBobina.addEventListener('click',()=>{
      tabBobina.classList.add('active'); tabBobina.setAttribute('aria-selected','true');
      tabResma.classList.remove('active'); tabResma.setAttribute('aria-selected','false');
      panelBobina.classList.remove('hidden'); panelResma.classList.add('hidden');
    });
    tabResma.addEventListener('click',()=>{
      tabResma.classList.add('active'); tabResma.setAttribute('aria-selected','true');
      tabBobina.classList.remove('active'); tabBobina.setAttribute('aria-selected','false');
      panelResma.classList.remove('hidden'); panelBobina.classList.add('hidden');
    });

    // --- Subswitch (Resma) ---
    const modePeso  = document.getElementById('mode-peso');
    const modeHojas = document.getElementById('mode-hojas');
    const bloquePeso  = document.getElementById('bloque-peso');
    const bloqueHojas = document.getElementById('bloque-hojas');

    function activarModo(isPeso){
      if(isPeso){
        modePeso.classList.add('active'); modePeso.setAttribute('aria-pressed','true');
        modeHojas.classList.remove('active'); modeHojas.setAttribute('aria-pressed','false');
        bloquePeso.classList.remove('hidden'); bloqueHojas.classList.add('hidden');
      }else{
        modeHojas.classList.add('active'); modeHojas.setAttribute('aria-pressed','true');
        modePeso.classList.remove('active'); modePeso.setAttribute('aria-pressed','false');
        bloqueHojas.classList.remove('hidden'); bloquePeso.classList.add('hidden');
      }
      document.getElementById('resultado-resma').textContent = '';
    }
    modePeso.addEventListener('click',()=>activarModo(true));
    modeHojas.addEventListener('click',()=>activarModo(false));

    // --- Cálculo Bobina (usa espesor) ---
    document.getElementById('btn-bobina').addEventListener('click',()=>{
      const G = parseFloat(document.getElementById('g').value);  // g/m2
      const t = parseFloat(document.getElementById('t').value);  // µm
      const A = parseFloat(document.getElementById('a').value);  // mm
      const D = parseFloat(document.getElementById('D').value);  // mm
      const d = parseFloat(document.getElementById('d').value);  // mm

      const out = document.getElementById('resultado-bobina');
      if([G,t,A,D,d].some(x=>isNaN(x) || x<=0)){
        out.textContent = '⚠️ Por favor, introduce todos los valores (mayores que cero).';
        return;
      }
      if(D <= d){ out.textContent='⚠️ El diámetro exterior debe ser mayor que el del mandril.'; return; }

      // Fórmula v3.1 (con espesor): P[kg] = (π * G * A * (D² − d²)) / (4 * 10^6 * t)
      const P = (Math.PI * G * A * (D*D - d*d)) / (4 * 1e6 * t);
      out.innerHTML = `📈 Peso: <strong>${P.toFixed(2)}</strong> kg`;
    });

    // --- Cálculo Resma: Peso ---
    document.getElementById('btn-resma-peso').addEventListener('click',()=>{
      const N = parseFloat(document.getElementById('nH').value);    // hojas
      const G = parseFloat(document.getElementById('gR').value);     // g/m2
      const A = parseFloat(document.getElementById('aR').value);     // mm
      const L = parseFloat(document.getElementById('lR').value);     // mm
      const out = document.getElementById('resultado-resma');

      if([N,G,A,L].some(x=>isNaN(x) || x<=0)){
        out.textContent = '⚠️ Completa todos los campos con valores mayores que cero.'; return;
      }
      // Pkg = N * G * A_mm * L_mm / 1e9
      const Pkg = (N * G * A * L) / 1e9;
      out.innerHTML = `📦 Peso: <strong>${Pkg.toFixed(3)}</strong> kg`;
    });

    // --- Cálculo Resma: Número de hojas ---
    document.getElementById('btn-resma-hojas').addEventListener('click',()=>{
      const Pkg = parseFloat(document.getElementById('pK').value);   // kg
      const G   = parseFloat(document.getElementById('gR2').value);  // g/m2
      const A   = parseFloat(document.getElementById('aR2').value);  // mm
      const L   = parseFloat(document.getElementById('lR2').value);  // mm
      const out = document.getElementById('resultado-resma');

      if([Pkg,G,A,L].some(x=>isNaN(x) || x<=0)){
        out.textContent = '⚠️ Completa todos los campos con valores mayores que cero.'; return;
      }
      // N = Pkg * 1e9 / (G * A_mm * L_mm)
      const N = (Pkg * 1e9) / (G * A * L);
      out.innerHTML = `📄 Hojas: <strong>${Math.floor(N)}</strong>`;
    });
  </script></body>
</html>