<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Peso de Bobinas</title>
<link rel="icon" type="image/png" href="icon-192.png">

<!-- Manifest para PWA -->
<link rel="manifest" href="manifest.json">

<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(to bottom, #f0f8ff, #cce7ff);
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 0;
  padding: 0;
  min-height: 100vh;
}
header {
  background-color: #0077cc;
  color: white;
  width: 100%;
  padding: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.2);
}
header img {
  width: 50px;
  height: 50px;
}
h1 {
  margin: 0;
  font-size: 1.8em;
}
.calculator {
  background-color: #ffffffcc;
  padding: 20px 30px;
  margin-top: 20px;
  border-radius: 15px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  width: 90%;
  max-width: 400px;
}
.calculator label {
  display: block;
  margin-top: 15px;
  font-weight: bold;
}
.calculator input {
  width: 100%;
  padding: 10px;
  margin-top: 5px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 1em;
}
button {
  width: 100%;
  margin-top: 20px;
  padding: 15px;
  font-size: 1.2em;
  border: none;
  border-radius: 10px;
  background-color: #ff6600;
  color: white;
  cursor: pointer;
  transition: background 0.3s;
}
button:hover {
  background-color: #ff4500;
}
.results {
  margin-top: 20px;
  background-color: #e0f7fa;
  padding: 15px;
  border-radius: 10px;
  text-align: center;
  font-size: 1.2em;
}
footer {
  width: 100%;
  text-align: center;
  padding: 10px 0;
  font-size: 0.9em;
  color: #555;
  margin-top: auto;
  opacity: 0.8;
}
</style>
</head>
<body>

<header>
  <img src="icon-192.png" alt="Logo">
  <h1>Calculadora de Peso de Bobinas</h1>
</header>

<div class="calculator">
  <label for="gramaje">Gramaje (g/m²):</label>
  <input type="number" id="gramaje" placeholder="Ej: 59">

  <label for="espesor">Espesor (mm):</label>
  <input type="number" id="espesor" placeholder="Ej: 0.065">

  <label for="diametro">Diámetro de la bobina (cm):</label>
  <input type="number" id="diametro" placeholder="Ej: 153">

  <label for="mandril">Diámetro del mandril (mm):</label>
  <input type="number" id="mandril" placeholder="Ej: 152">

  <label for="ancho">Ancho de la bobina (cm):</label>
  <input type="number" id="ancho" placeholder="Ej: 206">

  <button onclick="calcularPeso()">CALCULAR</button>

  <div class="results" id="results">
    Peso de la bobina: -- kg<br>
    Longitud del papel: -- m
  </div>
</div>

<footer>
  © Mihai F. para Perellon S.L.
</footer>

<script>
function calcularPeso() {
  let G = parseFloat(document.getElementById('gramaje').value); // g/m²
  let t = parseFloat(document.getElementById('espesor').value) / 1000; // mm → m
  let D_o = parseFloat(document.getElementById('diametro').value) / 100; // cm → m
  let D_c = parseFloat(document.getElementById('mandril').value) / 1000; // mm → m
  let w = parseFloat(document.getElementById('ancho').value) / 100; // cm → m

  if (isNaN(G) || isNaN(t) || isNaN(D_o) || isNaN(D_c) || isNaN(w)) {
    alert("Por favor, completa todos los campos correctamente.");
    return;
  }

  // Longitud del papel
  let L = Math.PI * (D_o * D_o - D_c * D_c) / (4 * t);

  // Peso de la bobina (en kg)
  let W = (G * w * L) / 1000;

  document.getElementById('results').innerHTML =
    "Peso de la bobina: " + W.toFixed(2) + " kg<br>" +
    "Longitud del papel: " + L.toFixed(2) + " m";
}

// Registro del Service Worker
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(() => console.log('Service Worker registrado'))
    .catch(err => console.log('Error SW:', err));
}
</script>

</body>
</html>
